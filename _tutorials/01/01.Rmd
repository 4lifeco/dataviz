---
title: "01. Building Graphs Layer by Layer"
description: |
  Gentle introduction to ggplot2: how to create a plot object, add data,
  create a mapping, and add layers.
categories: "Chapter 2"
author:
  - name: IÃ±aki Ucar
    affiliation: Department of Statistics
    orcid_id: 0000-0001-6403-5550
date: 2022-10-05
output:
  distill::distill_article:
    self_contained: false
    toc: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo=TRUE, eval=FALSE)
```

# Preliminaries

The goal of this tutorial is to provide a gentle introduction to ggplot2.
We will learn to create and manipulate a ggplot object, add data,
create a mapping of data to visual channels, and add layers of visual marks.
The best way to follow this tutorial is by using the
[RStudio](https://www.rstudio.com/) IDE,
so ensure that you have it installed in your computer (along with R).

## Workflow

To start with, let's create a **new project** by clicking on `File > New Project...`.
Follow the steps to give it a sensible name (e.g., "dataviz")
and place it under a proper path in your computer.
This creates a new folder where you can save all your files (scripts, plots, data...) related to this course,
preferably organized following some logic (e.g., all scripts under a `scripts` subdirectory, etc.).
Now, whenever you return to your project
(if you close and open RStudio again, your last project is automatically opened;
otherwise, click `File > Recent Projects > ...`),
RStudio automatically sets the working directory (both of the file manager as well as the R session) to the project folder.

Once you open a new script (`File > New File > R Script`), the interface is divided in four sections:

- **Editor** (top-left), where you can edit the script file.
- **Console** (bottom-left), where you can execute R commands in the current R session.
- **Environment** (top-right), where you can inspect the variables defined in the current R session.
- **Files / Plots / Packages / Help / Viewer** (bottom-right), where you can browse your files,
  show your plots, inspect the installed packages, read the manual pages...

Save that empty script (`Ctrl + S`) using a sensible name (e.g., `01-building_graphs_layer_by_layer.R`)
in your project folder (or some subfolder according to your organization logic).

Now, the recommended workflow is to copy the chunks of code you'll find in this tutorial into your script,
and there you can run it (by selecting some lines and hitting `Ctrl + Enter`,
or just hitting `Ctrl + Enter` sequentially to run code line by line), modify it, and try again.
Be sure to **save your progress with some frequency**, just in case,
and to **comment** your code (`# comments starts with a hashtag like this`).
_Future-you_ will thank you.

## Reading the documentation

A very important skill for every programming language is learning how to read its documentation.
In R, we can quickly open the manual page for any function just by typing `?name-of-the-function` in the console, for example, `?mean` (try this yourself).
Then, you'll always find the same structure, more or less:

1. **Description** of the function, what the function does.
2. **Usage**, how to call the function, sometimes with different objects.
3. **Arguments**, the description of every argument shown in the usage section.
4. **Value**, what the function returns.
5. Optionally, other sections with more **details**.
6. Optionally, **References**.
7. Optionally, a list of related functions called **See Also**.
8. Optionally, but usually, **Examples** of usage.

## Checkpoint 1

Ensure that you have

- created a new project for the course;
- created a new script in your project for this tutorial;
- located all the relevant panels and parts of the IDE;
- figured out how to save the file;
- figured out how to send the code from the script to the console for execution;
- become accustomed to the documentation.

## Required packages

For this tutorial, we need these packages
(run the following to install them if you don't have them already):

```{r, eval=FALSE}
install.packages("ggplot2")
```

# First steps

Follow the [First steps](https://ggplot2-book.org/getting-started.html) tutorial
from the ggplot2 book, and use the proposed exercises as checkpoints.
