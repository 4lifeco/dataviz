---
title: Data Visualization
subtitle: Chapter 3. Data Visualization in R
author: Iñaki Úcar
institute: Department of Statistics | uc3m-Santander Big Data Institute
date: |
  <br>Master in Computational Social Science<br>Last generated: `r Sys.Date()`
output:
  xaringan::moon_reader:
    chakra: assets/remark-latest.min.js
    lib_dir: assets
    css: [default, metropolis, metropolis-fonts, assets/theme.css, assets/colors.css]
    nature:
      beforeInit: assets/macros.js
      highlightStyle: vs
      highlightLines: true
      countIncrementalSlides: false
---
class: toc, base24, middle, clear

```{r setup, include=FALSE}
options(htmltools.dir.version=FALSE)
knitr::opts_chunk$set(message=FALSE, warning=FALSE, fig.align="center", dpi=150)

library(ggplot2)
theme_set(theme_gray(base_size=16))
library(dplyr)
library(tidyr)
set.seed(42)
```

```{r xaringanExtra, echo=FALSE}
xaringanExtra::use_share_again()
xaringanExtra::style_share_again(share_buttons="none")
xaringanExtra::use_scribble()
xaringanExtra::use_panelset(in_xaringan=TRUE)
```

---
class: intoc, inverse, center, middle

# Directory of Visualizations
## Based on [The R Graph Gallery](https://r-graph-gallery.com/)

---
class: base24

# Contents

.pull-left[
- .distribution[[Distribution](#5)].icons[
  ![:scale 10%](assets/img/section/Violin150.png)
  ![:scale 10%](assets/img/section/Density150.png)
  ![:scale 10%](assets/img/section/Histogram150.png)
  ![:scale 10%](assets/img/section/Box1150.png)
  ![:scale 10%](assets/img/section/Joyplot150.png)
  ]

- .correlation[[Correlation](#32)].icons[
  ![:scale 10%](assets/img/section/ScatterPlot150.png)
  ![:scale 10%](assets/img/section/Heatmap150.png)
  ![:scale 10%](assets/img/section/Correlogram150.png)
  ![:scale 10%](assets/img/section/BubblePlot150.png)
  ![:scale 10%](assets/img/section/ScatterConnected150.png)
  ![:scale 10%](assets/img/section/2dDensity150.png)
  ]

- .ranking[[Ranking](#55)].icons[
  ![:scale 10%](assets/img/section/Bar150.png)
  ![:scale 10%](assets/img/section/Spider150.png)
  ![:scale 10%](assets/img/section/Wordcloud150.png)
  ![:scale 10%](assets/img/section/Parallel1150.png)
  ![:scale 10%](assets/img/section/Lollipop150.png)
  ![:scale 10%](assets/img/section/CircularBarplot150.png)
  ]

- .part[[Part of a Whole](#66)].icons[
  ![:scale 10%](assets/img/section/GroupedRed150.png)
  ![:scale 10%](assets/img/section/Tree150.png)
  ![:scale 10%](assets/img/section/Doughnut150.png)
  ![:scale 10%](assets/img/section/Pie150.png)
  ![:scale 10%](assets/img/section/Dendrogram150.png)
  ![:scale 10%](assets/img/section/CircularPacking150.png)
  ]
]
.pull-right[
- .evolution[Evolution].icons[
  ![:scale 10%](assets/img/section/Line150.png)
  ![:scale 10%](assets/img/section/Area150.png)
  ![:scale 10%](assets/img/section/StackedArea150.png)
  ![:scale 10%](assets/img/section/Stream150.png)
  ![:scale 10%](assets/img/section/Time150.gif)
  ]

- .map[Map].icons[
  ![:scale 10%](assets/img/section/Map150.png)
  ![:scale 10%](assets/img/section/Choropleth150.png)
  ![:scale 10%](assets/img/section/MapHexbin150.png)
  ![:scale 10%](assets/img/section/Cartogram150.png)
  ![:scale 10%](assets/img/section/ConnectedMap150.png)
  ![:scale 10%](assets/img/section/BubbleMap150.png)
  ]

- .flow[Flow].icons[
  ![:scale 10%](assets/img/section/Chord150.png)
  ![:scale 10%](assets/img/section/Network150.png)
  ![:scale 10%](assets/img/section/Sankey150.png)
  ![:scale 10%](assets/img/section/Arc150.png)
  ![:scale 10%](assets/img/section/Bundle150.png)
  ]

- .other[Other resources].icons[
  ![:scale 10%](assets/img/section/anim150.gif)
  ![:scale 10%](assets/img/section/Interactive150.png)
  ![:scale 10%](assets/img/section/Bad150.png)
  ![:scale 10%](assets/img/section/DataArt1150.png)
  ]
]

---
class: distribution

# Distribution
.footnote[[< Contents](#4)]

[![:scale 15%](assets/img/section/Violin150.png)](https://r-graph-gallery.com/violin.html)
[![:scale 15%](assets/img/section/Density150.png)](https://r-graph-gallery.com/density-plot.html)
[![:scale 15%](assets/img/section/Histogram150.png)](https://r-graph-gallery.com/histogram.html)
[![:scale 15%](assets/img/section/Box1150.png)](https://r-graph-gallery.com/boxplot.html)
[![:scale 15%](assets/img/section/Joyplot150.png)](https://r-graph-gallery.com/ridgeline-plot.html)

.bottom[Violin]
.bottom[Density]
.bottom[Histogram]
.bottom[Boxplot]
.bottom[Ridgeline]

<br>

.black.font120[
- Visualization of one or multiple **univariate distributions**
- Stacked versions are difficult to interpret and should be avoided
- Some require fine-tuning of the parameters to avoid being misleading
]

---
class: distribution

# Distribution ![:scale 6%](assets/img/section/Histogram150.png) Histogram
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r histogram, eval=FALSE}
ggplot(mpg) +
  aes(hwy) +
  geom_histogram() #<<
```
]
.pull-right-mod[
```{r histogram, echo=FALSE, fig.asp=1.25}
```
]

---
class: distribution

# Distribution ![:scale 6%](assets/img/section/Histogram150.png) Histogram
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r histogram-density, eval=FALSE}
ggplot(mpg) +
  aes(hwy, after_stat(density)) + #<<
  geom_histogram()
```
]
.pull-right-mod[
```{r histogram-density, echo=FALSE, fig.asp=1.25}
```
]

---
class: distribution

# Distribution ![:scale 6%](assets/img/section/Histogram150.png) Histogram
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r histogram-fill, eval=FALSE}
ggplot(mpg) +
  aes(hwy, fill=class) + #<<
  geom_histogram() +
  theme(legend.position=c(1, 1),
        legend.justification=c(1, 1))
```
]
.pull-right-mod[
```{r histogram-fill, echo=FALSE, fig.asp=1.25}
```
]

---
class: distribution

# Distribution ![:scale 6%](assets/img/section/Histogram150.png) Histogram
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r histogram-facet, eval=FALSE}
ggplot(mpg) +
  aes(hwy) +
  geom_histogram() +
  facet_grid(class ~ .) #<<
```
]
.pull-right-mod[
```{r histogram-facet, echo=FALSE, fig.asp=1.25}
```
]

---
class: distribution

# Distribution ![:scale 6%](assets/img/section/Histogram150.png) Histogram
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r histogram-reorder, eval=FALSE}
ggplot(mpg) +
  aes(hwy) +
  geom_histogram() +
  facet_grid(
    reorder(class, -hwy, median) ~ .) #<<
```
]
.pull-right-mod[
```{r histogram-reorder, echo=FALSE, fig.asp=1.25}
```
]

---
class: distribution

# Distribution ![:scale 6%](assets/img/section/Density150.png) Density
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r density, eval=FALSE}
ggplot(mpg) +
  aes(hwy) +
  geom_density() #<<
```
]
.pull-right-mod[
```{r density, echo=FALSE, fig.asp=1.25}
```
]

---
class: distribution

# Distribution ![:scale 6%](assets/img/section/Density150.png) Density
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r density-histogram, eval=FALSE}
ggplot(mpg) +
  aes(hwy, after_stat(density)) + #<<
  geom_histogram(fill="gray") + #<<
  geom_density()
```
]
.pull-right-mod[
```{r density-histogram, echo=FALSE, fig.asp=1.25}
```
]

---
class: distribution

# Distribution ![:scale 6%](assets/img/section/Density150.png) Density
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r density-adjust, eval=FALSE}
ggplot(mpg) +
  aes(hwy, after_stat(density)) +
  geom_histogram(fill="gray") +
  geom_density(adjust=0.2) #<<
```
]
.pull-right-mod[
```{r density-adjust, echo=FALSE, fig.asp=1.25}
```
]

---
class: distribution

# Distribution ![:scale 6%](assets/img/section/Density150.png) Density
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r density-bins, eval=FALSE}
ggplot(mpg) +
  aes(hwy, after_stat(density)) +
  geom_histogram(fill=NA) +
  geom_histogram(fill="gray", bins=10) + #<<
  geom_density()
```
]
.pull-right-mod[
```{r density-bins, echo=FALSE, fig.asp=1.25}
```
]

---
class: distribution

# Distribution ![:scale 6%](assets/img/section/Box1150.png) Boxplot
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r boxplot, eval=FALSE}
ggplot(mpg) +
  aes(hwy, class) +
  geom_boxplot() + #<<
  labs(y=NULL)
```
]
.pull-right-mod[
```{r boxplot, echo=FALSE, fig.asp=1.25}
```
]

---
class: distribution

# Distribution ![:scale 6%](assets/img/section/Box1150.png) Boxplot
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r boxplot-reorder, eval=FALSE}
ggplot(mpg) +
  aes(hwy, reorder(class, hwy, median)) + #<<
  geom_boxplot() +
  labs(y=NULL)
```
]
.pull-right-mod[
```{r boxplot-reorder, echo=FALSE, fig.asp=1.25}
```
]

---
class: distribution

# Distribution ![:scale 6%](assets/img/section/Box1150.png) Boxplot
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r boxplot-outlier, eval=FALSE}
ggplot(mpg) +
  aes(hwy, reorder(class, hwy, median)) +
  geom_boxplot(outlier.color="red") + #<<
  labs(y=NULL)
```
]
.pull-right-mod[
```{r boxplot-outlier, echo=FALSE, fig.asp=1.25}
```
]

---
class: distribution

# Distribution ![:scale 6%](assets/img/section/Box1150.png) Boxplot
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r boxplot-jitter, eval=FALSE}
ggplot(mpg) +
  aes(hwy, reorder(class, hwy, median)) +
  geom_boxplot(outlier.color="red") +
  geom_jitter(height=0.2, alpha=0.5) + #<<
  labs(y=NULL)
```
]
.pull-right-mod[
```{r boxplot-jitter, echo=FALSE, fig.asp=1.25}
```
]

---
class: distribution

# Distribution ![:scale 6%](assets/img/section/Box1150.png) Boxplot
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r boxplot-varwidth, eval=FALSE}
ggplot(mpg) +
  aes(hwy, reorder(class, hwy, median)) +
  geom_boxplot(outlier.color="red",
               varwidth=TRUE) + #<<
  geom_jitter(height=0.2, alpha=0.5) +
  labs(y=NULL)
```
]
.pull-right-mod[
```{r boxplot-varwidth, echo=FALSE, fig.asp=1.25}
```
]

---
class: distribution

# Distribution ![:scale 6%](assets/img/section/Box1150.png) Boxplot
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r boxplot-color, eval=FALSE}
ggplot(mpg) +
  aes(hwy, reorder(class, hwy, median)) +
  geom_boxplot(aes(color=drv)) + #<<
  labs(y=NULL) +
  theme(legend.position=c(1, 0),
        legend.justification=c(1, 0))
```
]
.pull-right-mod[
```{r boxplot-color, echo=FALSE, fig.asp=1.25}
```
]

---
class: distribution

# Distribution ![:scale 6%](assets/img/section/Box1150.png) Boxplot
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r boxplot-fill, eval=FALSE}
ggplot(mpg) +
  aes(hwy, reorder(class, hwy, median)) +
  geom_boxplot(aes(fill=drv)) + #<<
  labs(y=NULL) +
  theme(legend.position=c(1, 0),
        legend.justification=c(1, 0))
```
]
.pull-right-mod[
```{r boxplot-fill, echo=FALSE, fig.asp=1.25}
```
]

---
class: distribution

# Distribution ![:scale 6%](assets/img/section/Box1150.png) Boxplot
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r boxplot-fill-varwidth, eval=FALSE}
ggplot(mpg) +
  aes(hwy, reorder(class, hwy, median)) +
  geom_boxplot(aes(fill=drv),
               varwidth=TRUE) + #<<
  labs(y=NULL) +
  theme(legend.position=c(1, 0),
        legend.justification=c(1, 0))
```
]
.pull-right-mod[
```{r boxplot-fill-varwidth, echo=FALSE, fig.asp=1.25}
```
]

---
class: distribution

# Distribution ![:scale 6%](assets/img/section/Violin150.png) Violin
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r violin, eval=FALSE}
ggplot(mpg) +
  aes(hwy, reorder(class, hwy, median)) +
  geom_violin() + #<<
  labs(y=NULL)
```
]
.pull-right-mod[
```{r violin, echo=FALSE, fig.asp=1.25}
```
]

---
class: distribution

# Distribution ![:scale 6%](assets/img/section/Violin150.png) Violin
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r violin-fill, eval=FALSE}
ggplot(mpg) +
  aes(hwy, reorder(class, hwy, median)) +
  geom_violin(aes(fill=class)) + #<<
  labs(y=NULL) +
  theme(legend.position="none")
```
]
.pull-right-mod[
```{r violin-fill, echo=FALSE, fig.asp=1.25}
```
]

---
class: distribution

# Distribution ![:scale 6%](assets/img/section/Violin150.png) Violin
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r violin-viridis, eval=FALSE}
ggplot(mpg) +
  aes(hwy, reorder(class, hwy, median)) +
  geom_violin(aes(fill=class)) +
  scale_fill_viridis_d() + #<<
  labs(y=NULL) +
  theme(legend.position="none")
```
]
.pull-right-mod[
```{r violin-viridis, echo=FALSE, fig.asp=1.25}
```
]

---
class: distribution

# Distribution ![:scale 6%](assets/img/section/Violin150.png) Violin
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r violin-reorder, eval=FALSE}
mpg |> mutate(
  class=reorder(class, hwy, median)) |> #<<
ggplot() +
  aes(hwy, class) + #<<
  geom_violin(aes(fill=class)) +
  scale_fill_viridis_d() +
  labs(y=NULL) +
  theme(legend.position="none")
```
]
.pull-right-mod[
```{r violin-reorder, echo=FALSE, fig.asp=1.25}
```
]

---
class: distribution

# Distribution ![:scale 6%](assets/img/section/Joyplot150.png) Ridgeline
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r ridgeline, eval=FALSE}
mpg |> mutate(
  class=reorder(class, hwy, median)) |>
ggplot() +
  aes(hwy, class, fill=class) +
  ggridges::geom_density_ridges() + #<<
  scale_fill_viridis_d() +
  labs(y=NULL) +
  theme(legend.position="none")
```
]
.pull-right-mod[
```{r ridgeline, echo=FALSE, fig.asp=1.25}
```
]

---
class: distribution

# Distribution ![:scale 6%](assets/img/section/Joyplot150.png) Ridgeline
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r ridgeline-gradient, eval=FALSE}
mpg |> mutate(
  class=reorder(class, hwy, median)) |>
ggplot() +
  aes(hwy, class, fill=after_stat(x)) + #<<
  ggridges::geom_density_ridges_gradient() + #<<
  scale_fill_viridis_c() + #<<
  labs(y=NULL) +
  theme(legend.position="none")
```
]
.pull-right-mod[
```{r ridgeline-gradient, echo=FALSE, fig.asp=1.25}
```
]

---
class: distribution

# Distribution ![:scale 6%](assets/img/section/Joyplot150.png) Ridgeline
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r ridgeline-scale, eval=FALSE}
mpg |> mutate(
  class=reorder(class, hwy, median)) |>
ggplot() +
  aes(hwy, class, fill=after_stat(x)) +
  ggridges::geom_density_ridges_gradient(
    scale=1) + #<<
  scale_fill_viridis_c() +
  labs(y=NULL) +
  theme(legend.position="none")
```
]
.pull-right-mod[
```{r ridgeline-scale, echo=FALSE, fig.asp=1.25}
```
]

---
class: distribution

# Distribution ![:scale 6%](assets/img/section/Joyplot150.png) Ridgeline
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r ridgeline-quantile, eval=FALSE}
mpg |> mutate(
  class=reorder(class, hwy, median)) |>
ggplot() +
  aes(hwy, class, fill=after_stat(x)) +
  ggridges::geom_density_ridges_gradient(
    scale=1, quantile_lines=TRUE) + #<<
  scale_fill_viridis_c() +
  labs(y=NULL) +
  theme(legend.position="none")
```
]
.pull-right-mod[
```{r ridgeline-quantile, echo=FALSE, fig.asp=1.25}
```
]

---
class: distribution

# Distribution ![:scale 6%](assets/img/section/Joyplot150.png) Ridgeline
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r ridgeline-tailprob, eval=FALSE}
mpg |> mutate(
  class=reorder(class, hwy, median)) |>
ggplot() +
  aes(hwy, class, fill=0.5 - abs( #<<
    0.5 - after_stat(ecdf))) + #<<
  ggridges::geom_density_ridges_gradient(
    scale=1, calc_ecdf=TRUE) + #<<
  scale_fill_viridis_c("Tail prob.") +
  labs(y=NULL) +
  theme(legend.position=c(1, 0),
        legend.justification=c(1, 0))
```
]
.pull-right-mod[
```{r ridgeline-tailprob, echo=FALSE, fig.asp=1.25}
```
]

---
class: correlation

# Correlation
.footnote[[< Contents](#4)]

[![:scale 15%](assets/img/section/ScatterPlot150.png)](https://r-graph-gallery.com/scatterplot.html)
[![:scale 15%](assets/img/section/Heatmap150.png)](https://r-graph-gallery.com/heatmap.html)
[![:scale 15%](assets/img/section/Correlogram150.png)](https://r-graph-gallery.com/correlogram.html)
[![:scale 15%](assets/img/section/BubblePlot150.png)](https://r-graph-gallery.com/bubble-chart.html)
[![:scale 15%](assets/img/section/ScatterConnected150.png)](https://r-graph-gallery.com/connected-scatterplot.html)
[![:scale 15%](assets/img/section/2dDensity150.png)](https://r-graph-gallery.com/2d-density-chart.html)

.bottom[Scatter]
.bottom[Heatmap]
.bottom[Correlogram]
.bottom[Bubble]
.bottom[Connected scatter]
.bottom[Density 2D]

<br>

.black.font120[
- Visualization of the **relationship** between two variables
- Two continuous, or two discrete, or mixed
- Options to include a third one
]

---
class: correlation

# Correlation ![:scale 6%](assets/img/section/ScatterPlot150.png) Scatter
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r scatter, eval=FALSE}
gapminder::gapminder |>
  filter(year == 1997) |>
ggplot() +
  aes(gdpPercap, lifeExp) +
  scale_x_log10() +
  geom_point() #<<
```
]
.pull-right-mod[
```{r scatter, echo=FALSE, fig.asp=1.25}
```
]

---
class: correlation

# Correlation ![:scale 6%](assets/img/section/ScatterPlot150.png) Scatter
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r scatter-color, eval=FALSE}
gapminder::gapminder |>
  filter(year == 1997) |>
ggplot() +
  aes(gdpPercap, lifeExp) +
  scale_x_log10() +
  geom_point(aes(color=continent)) + #<<
  theme(legend.position=c(1, 0),
        legend.justification=c(1, 0))
```
]
.pull-right-mod[
```{r scatter-color, echo=FALSE, fig.asp=1.25}
```
]

---
class: correlation

# Correlation ![:scale 6%](assets/img/section/BubblePlot150.png) Bubble
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r scatter-bubble, eval=FALSE}
gapminder::gapminder |>
  filter(year == 1997) |>
ggplot() +
  aes(gdpPercap, lifeExp) +
  scale_x_log10() +
  geom_point(aes(color=continent,
                 size=pop)) + #<<
  theme(legend.position=c(1, 0),
        legend.justification=c(1, 0))
```
]
.pull-right-mod[
```{r scatter-bubble, echo=FALSE, fig.asp=1.25}
```
]

---
class: correlation

# Correlation ![:scale 6%](assets/img/section/BubblePlot150.png) Bubble
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r scatter-bubble-scale, eval=FALSE}
gapminder::gapminder |>
  filter(year == 1997) |>
ggplot() +
  aes(gdpPercap, lifeExp) +
  scale_x_log10() +
  geom_point(aes(color=continent,
                 size=pop),
             alpha=0.7) + #<<
  scale_size_area(max_size=20) + #<<
  theme(legend.position=c(1, 0),
        legend.justification=c(1, 0))
```
]
.pull-right-mod[
```{r scatter-bubble-scale, echo=FALSE, fig.asp=1.25}
```
]

---
class: correlation

# Correlation ![:scale 6%](assets/img/section/BubblePlot150.png) Bubble
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r scatter-smooth, eval=FALSE}
gapminder::gapminder |>
  filter(year == 1997) |>
ggplot() +
  aes(gdpPercap, lifeExp) +
  scale_x_log10() +
  geom_point(aes(color=continent,
                 size=pop),
             alpha=0.7) +
  scale_size_area(max_size=20) +
  geom_smooth() + #<<
  theme(legend.position=c(1, 0),
        legend.justification=c(1, 0))
```
]
.pull-right-mod[
```{r scatter-smooth, echo=FALSE, fig.asp=1.25}
```
]

---
class: correlation

# Correlation ![:scale 6%](assets/img/section/BubblePlot150.png) Bubble
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r scatter-smooth-lm, eval=FALSE}
gapminder::gapminder |>
  filter(year == 1997) |>
ggplot() +
  aes(gdpPercap, lifeExp) +
  scale_x_log10() +
  geom_point(aes(color=continent,
                 size=pop),
             alpha=0.7) +
  scale_size_area(max_size=20) +
  geom_smooth(method="lm") + #<<
  theme(legend.position=c(1, 0),
        legend.justification=c(1, 0))
```
]
.pull-right-mod[
```{r scatter-smooth-lm, echo=FALSE, fig.asp=1.25}
```
]

---
class: correlation

# Correlation ![:scale 6%](assets/img/section/ScatterConnected150.png) Connected Scatter
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r scatter-connected, eval=FALSE}
gapminder::gapminder |>
  filter(year == 1997) |>
ggplot() +
  aes(gdpPercap, lifeExp) +
  scale_x_log10() +
  geom_point(aes(color=continent)) +
  geom_line(aes(color=continent)) + #<<
  theme(legend.position=c(1, 0),
        legend.justification=c(1, 0))
```
]
.pull-right-mod[
```{r scatter-connected, echo=FALSE, fig.asp=1.25}
```
]

---
class: correlation

# Correlation ![:scale 6%](assets/img/section/ScatterConnected150.png) Connected Scatter
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r scatter-connected-path, eval=FALSE}
babynames::babynames |>
  filter(name %in% c(
    "Ashley", "Amanda")) |>
  filter(sex == "F") |>
  filter(year > 1970) |>
  select(year, name, n) |>
  spread(key = name, value=n, -1) |>
ggplot() +
  aes(Amanda, Ashley, color=year) + #<<
  geom_point() +
  geom_path() + #<<
  scale_color_viridis_c() +
  theme(legend.position=c(0, 1),
        legend.justification=c(0, 1))
```
]
.pull-right-mod[
```{r scatter-connected-path, echo=FALSE, fig.asp=1.25}
```
]

---
class: correlation

# Correlation ![:scale 6%](assets/img/section/ScatterConnected150.png) Connected Scatter
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r scatter-connected-path-label, eval=FALSE}
df <- babynames::babynames |>
  filter(name %in% c(
    "Ashley", "Amanda")) |>
  filter(sex == "F") |>
  filter(year > 1970) |>
  select(year, name, n) |>
  spread(key = name, value=n, -1)

text <- df |> #<<
  filter(year %in% c(
    1972, 1980, 1984, 1987, 2012))

ggplot(df) +
  aes(Amanda, Ashley, color=year) +
  geom_path(arrow=arrow( #<<
    angle=15, type="closed", #<<
    length=unit(0.1, "inches"))) + #<<
  scale_color_viridis_c() +
  geom_label(aes(label=year), text) + #<<
  theme(legend.position=c(0, 1),
        legend.justification=c(0, 1))
```
]
.pull-right-mod[
```{r scatter-connected-path-label, echo=FALSE, fig.asp=1.25}
```
]

---
class: correlation

# Correlation ![:scale 6%](assets/img/section/ScatterPlot150.png) Scatter
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r scatter-distribution, eval=FALSE}
ggplot(faithful) +
  aes(eruptions, waiting) +
  geom_point() #<<
```
]
.pull-right-mod[
```{r scatter-distribution, echo=FALSE, fig.asp=1.25}
```
]

---
class: correlation

# Correlation ![:scale 6%](assets/img/section/ScatterPlot150.png) Scatter
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r scatter-distribution-margin, eval=FALSE}
ggplot(faithful) +
  aes(eruptions, waiting) +
  geom_point() +
  ggside::geom_xsidehistogram() #<<
```
]
.pull-right-mod[
```{r scatter-distribution-margin, echo=FALSE, fig.asp=1.25}
```
]

---
class: correlation

# Correlation ![:scale 6%](assets/img/section/2dDensity150.png) Density 2D
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r density2d-histogram, eval=FALSE}
ggplot(faithful) +
  aes(eruptions, waiting) +
  geom_bin2d() + #<<
  scale_fill_viridis_c() +
  ggside::geom_xsidehistogram() +
  theme(legend.position=c(1, 0),
        legend.justification=c(1, 0))
```
]
.pull-right-mod[
```{r density2d-histogram, echo=FALSE, fig.asp=1.25}
```
]

---
class: correlation

# Correlation ![:scale 6%](assets/img/section/2dDensity150.png) Density 2D
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r density2d-hex, eval=FALSE}
ggplot(faithful) +
  aes(eruptions, waiting) +
  geom_hex() + #<<
  scale_fill_viridis_c() +
  ggside::geom_xsidehistogram() +
  theme(legend.position=c(1, 0),
        legend.justification=c(1, 0))
```
]
.pull-right-mod[
```{r density2d-hex, echo=FALSE, fig.asp=1.25}
```
]

---
class: correlation

# Correlation ![:scale 6%](assets/img/section/2dDensity150.png) Density 2D
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r density2d, eval=FALSE}
ggplot(faithful) +
  aes(eruptions, waiting) +
  geom_density2d_filled() + #<<
  ggside::geom_xsidehistogram() +
  theme(legend.position=c(1, 0),
        legend.justification=c(1, 0))
```
]
.pull-right-mod[
```{r density2d, echo=FALSE, fig.asp=1.25}
```
]

---
class: correlation

# Correlation ![:scale 6%](assets/img/section/2dDensity150.png) Density 2D
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r density2d-raster, eval=FALSE}
ggplot(faithfuld) +
  aes(eruptions, waiting, fill=density) + #<<
  geom_raster() + #<<
  scale_fill_viridis_c() +
  theme(legend.position=c(1, 0),
        legend.justification=c(1, 0))
```
]
.pull-right-mod[
```{r density2d-raster, echo=FALSE, fig.asp=1.25}
```
]

---
class: correlation

# Correlation ![:scale 6%](assets/img/section/2dDensity150.png) Density 2D
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r density2d-raster-interpolate, eval=FALSE}
ggplot(faithfuld) +
  aes(eruptions, waiting, fill=density) +
  geom_raster(interpolate=TRUE) + #<<
  scale_fill_viridis_c() +
  theme(legend.position=c(1, 0),
        legend.justification=c(1, 0))
```
]
.pull-right-mod[
```{r density2d-raster-interpolate, echo=FALSE, fig.asp=1.25}
```
]

---
class: correlation

# Correlation ![:scale 6%](assets/img/section/Heatmap150.png) Heatmap
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r heatmap, eval=FALSE}
mtcars |>
  tibble::rownames_to_column("model") |>
  gather("key", "value", -model) |>
ggplot() +
  aes(key, model, fill=value) +
  geom_tile() + #<<
  scale_fill_viridis_c(
    trans="pseudo_log") + #<<
  labs(x=NULL, y=NULL)
```
]
.pull-right-mod[
```{r heatmap, echo=FALSE, fig.asp=1.25}
```
]

---
class: correlation

# Correlation ![:scale 6%](assets/img/section/Correlogram150.png) Correlogram
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r correlation, eval=FALSE}
mtcars |>
  cor(mtcars) |>
  ggcorrplot::ggcorrplot() + #<<
  theme(legend.position="top")
```
]
.pull-right-mod[
```{r correlation, echo=FALSE, fig.asp=1.25}
```
]

---
class: correlation

# Correlation ![:scale 6%](assets/img/section/Correlogram150.png) Correlogram
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r correlation-order, eval=FALSE}
mtcars |>
  cor(mtcars) |>
  ggcorrplot::ggcorrplot(
    hc.order=TRUE,  #<<
    outline.color="white") + #<<
  theme(legend.position="top")
```
]
.pull-right-mod[
```{r correlation-order, echo=FALSE, fig.asp=1.25}
```
]

---
class: correlation

# Correlation ![:scale 6%](assets/img/section/Correlogram150.png) Correlogram
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r correlation-circle, eval=FALSE}
mtcars |>
  cor(mtcars) |>
  ggcorrplot::ggcorrplot(
    hc.order=TRUE,
    method="circle") + #<<
  theme(legend.position="top")
```
]
.pull-right-mod[
```{r correlation-circle, echo=FALSE, fig.asp=1.25}
```
]

---
class: correlation

# Correlation ![:scale 6%](assets/img/section/Correlogram150.png) Correlogram
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r correlogram, eval=FALSE}
GGally::ggpairs(iris)
```
]
.pull-right-mod[
```{r correlogram, echo=FALSE, fig.asp=1.25}
```
]

---
class: correlation

# Correlation ![:scale 6%](assets/img/section/Correlogram150.png) Correlogram
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r correlogram-color, eval=FALSE}
GGally::ggpairs(
  iris,
  aes(color=Species) #<<
)
```
]
.pull-right-mod[
```{r correlogram-color, echo=FALSE, fig.asp=1.25}
```
]

---
class: ranking

# Ranking
.footnote[[< Contents](#4)]

[![:scale 15%](assets/img/section/Bar150.png)](https://r-graph-gallery.com/barplot.html)
[![:scale 15%](assets/img/section/Spider150.png)](https://r-graph-gallery.com/spider-or-radar-chart.html)
[![:scale 15%](assets/img/section/Wordcloud150.png)](https://r-graph-gallery.com/wordcloud.html)
[![:scale 15%](assets/img/section/Parallel1150.png)](https://r-graph-gallery.com/parallel-plot.html)
[![:scale 15%](assets/img/section/Lollipop150.png)](https://r-graph-gallery.com/lollipop-plot.html)
[![:scale 15%](assets/img/section/CircularBarplot150.png)](https://r-graph-gallery.com/circular-barplot.html)

.bottom[Barplot]
.bottom[Spider/radar]
.bottom[Wordcloud]
.bottom[Parallel]
.bottom[Lollipop]
.bottom[Circular barplot]

<br>

.black.font120[
- Visualization of the **ranking of a categorical variable**
- Based on some other numerical variable
- **Sort your data!**
]

---
class: ranking

# Ranking ![:scale 6%](assets/img/section/Bar150.png) Barplot
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r barplot, eval=FALSE}
ggplot(mpg) +
  aes(class) +
  geom_bar() + #<<
  labs(x=NULL)
```
]
.pull-right-mod[
```{r barplot, echo=FALSE, fig.asp=1.25}
```
]

---
class: ranking

# Ranking ![:scale 6%](assets/img/section/Bar150.png) Barplot
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r barplot-col, eval=FALSE}
mpg |>
  count(drv, class, name="count") |>
ggplot() +
  aes(count, class) + #<<
  geom_col() + #<<
  labs(y=NULL)
```
]
.pull-right-mod[
```{r barplot-col, echo=FALSE, fig.asp=1.25}
```
]

---
class: ranking

# Ranking ![:scale 6%](assets/img/section/Bar150.png) Barplot
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r barplot-order, eval=FALSE}
mpg |>
  count(drv, class, name="count") |>
ggplot() +
  aes(count, reorder(class, count, sum)) + #<<
  geom_col() +
  labs(y=NULL)
```
]
.pull-right-mod[
```{r barplot-order, echo=FALSE, fig.asp=1.25}
```
]

---
class: ranking

# Ranking ![:scale 6%](assets/img/section/Bar150.png) Barplot
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r barplot-color, eval=FALSE}
mpg |>
  count(drv, class, name="count") |>
ggplot() +
  aes(count, reorder(class, count, sum)) +
  geom_col(aes(fill=drv)) + #<<
  labs(y=NULL) +
  theme(legend.position="top")
```
]
.pull-right-mod[
```{r barplot-color, echo=FALSE, fig.asp=1.25}
```
]

---
class: ranking

# Ranking ![:scale 6%](assets/img/section/CircularBarplot150.png) Circular Barplot
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r barplot-circular, eval=FALSE}
mpg |>
  count(drv, class, name="count") |>
ggplot() +
  aes(count, reorder(class, count, sum)) +
  geom_col(aes(fill=drv)) +
  coord_polar(theta="y") + #<<
  labs(y=NULL) +
  theme(legend.position="top")
```
]
.pull-right-mod[
```{r barplot-circular, echo=FALSE, fig.asp=1.25}
```
]

---
class: ranking

# Ranking ![:scale 6%](assets/img/section/Lollipop150.png) Lollipop
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r lollipop, eval=FALSE}
mpg |>
  count(drv, class, name="count") |>
ggplot() +
  aes(count, reorder(class, count, sum)) +
  geom_segment(aes(xend=0, yend=class)) + #<<
  geom_point(size=3) + #<<
  labs(y=NULL)
```
]
.pull-right-mod[
```{r lollipop, echo=FALSE, fig.asp=1.25}
```
]

---
class: ranking

# Ranking ![:scale 6%](assets/img/section/Lollipop150.png) Lollipop
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r lollipop-color, eval=FALSE}
mpg |>
  count(drv, class, name="count") |>
ggplot() +
  aes(count, reorder(class, count, sum)) +
  aes(color=drv) + #<<
  geom_segment(aes(xend=0, yend=class)) +
  geom_point(size=3) +
  labs(y=NULL) +
  theme(legend.position=c(1, 0),
        legend.justification=c(1, 0))
```
]
.pull-right-mod[
```{r lollipop-color, echo=FALSE, fig.asp=1.25}
```
]

---
class: ranking

# Ranking ![:scale 6%](assets/img/section/Lollipop150.png) Lollipop
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r lollipop-minmax, eval=FALSE}
mpg |>
  count(drv, class, name="count") |>
  group_by(class) |>
  summarise(xmin = min(count),
            count = max(count)) |>
ggplot() +
  aes(count, reorder(class, count, sum)) +
  geom_segment(aes(xend=xmin, yend=class)) + #<<
  geom_point(size=3) +
  geom_point(aes(xmin), size=3) + #<<
  labs(y=NULL) +
  expand_limits(x=0) #<<
```
]
.pull-right-mod[
```{r lollipop-minmax, echo=FALSE, fig.asp=1.25}
```
]

---
class: ranking

# Ranking ![:scale 6%](assets/img/section/Parallel1150.png) Parallel
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r parallel, eval=FALSE}
iris |>
  tibble::rowid_to_column("id") |> #<<
  gather("key", "value", -Species, -id) |>
ggplot() +
  aes(key, value, color=Species) +
  geom_point(alpha=0.5) +
  geom_line(aes(group=id), alpha=0.3) + #<<
  scale_color_viridis_d() +
  labs(x=NULL) +
  theme(legend.position="top")
```
]
.pull-right-mod[
```{r parallel, echo=FALSE, fig.asp=1.25}
```
]

---
class: ranking

# Ranking ![:scale 6%](assets/img/section/Parallel1150.png) Parallel
.footnote[[< Contents](#4)]

.pull-left-mod[
```{r parallel-scale, eval=FALSE}
iris |>
  tibble::rowid_to_column("id") |>
  gather("key", "value", -Species, -id) |>
  group_by(key) |> #<<
  mutate(value = scale(value)) |> #<<
ggplot() +
  aes(key, value, color=Species) +
  geom_point(alpha=0.5) +
  geom_line(aes(group=id), alpha=0.3) +
  scale_color_viridis_d() +
  labs(x=NULL, y="Std. value") + #<<
  theme(legend.position="top")
```
]
.pull-right-mod[
```{r parallel-scale, echo=FALSE, fig.asp=1.25}
```
]

---
class: part

# Part of a Whole
.footnote[[< Contents](#4)]

[![:scale 15%](assets/img/section/GroupedRed150.png)](https://r-graph-gallery.com/stacked-barplot.html)
[![:scale 15%](assets/img/section/Tree150.png)](https://r-graph-gallery.com/treemap.html)
[![:scale 15%](assets/img/section/Doughnut150.png)](https://r-graph-gallery.com/doughnut-plot.html)
[![:scale 15%](assets/img/section/Pie150.png)](https://r-graph-gallery.com/pie-plot.html)
[![:scale 15%](assets/img/section/Dendrogram150.png)](https://r-graph-gallery.com/dendrogram.html)
[![:scale 15%](assets/img/section/CircularPacking150.png)](https://r-graph-gallery.com/circle-packing.html)

.bottom[Grouped and Stacked barplot]
.bottom[Treemap]
.bottom[Doughnut]
.bottom[Pie chart]
.bottom[Dendrogram]
.bottom[Circular packing]

<br>

.black.font120[
]

---
class: evolution

# Evolution
.footnote[[< Contents](#4)]

[![:scale 15%](assets/img/section/Line150.png)](https://r-graph-gallery.com/line-plot.html)
[![:scale 15%](assets/img/section/Area150.png)](https://r-graph-gallery.com/area-chart.html)
[![:scale 15%](assets/img/section/StackedArea150.png)](https://r-graph-gallery.com/stacked-area-graph.html)
[![:scale 15%](assets/img/section/Stream150.png)](https://r-graph-gallery.com/streamgraph.html)
[![:scale 15%](assets/img/section/Time150.gif)](https://r-graph-gallery.com/time-series.html)

.bottom[Line plot]
.bottom[Area]
.bottom[Stacked area]
.bottom[Stream chart]
.bottom[Time series]

<br>

.black.font120[
]

---
class: map

# Map
.footnote[[< Contents](#4)]

[![:scale 15%](assets/img/section/Map150.png)](https://r-graph-gallery.com/map.html)
[![:scale 15%](assets/img/section/Choropleth150.png)](https://r-graph-gallery.com/choropleth-map.html)
[![:scale 15%](assets/img/section/MapHexbin150.png)](https://r-graph-gallery.com/hexbin-map.html)
[![:scale 15%](assets/img/section/Cartogram150.png)](https://r-graph-gallery.com/cartogram.html)
[![:scale 15%](assets/img/section/ConnectedMap150.png)](https://r-graph-gallery.com/connection-map.html)
[![:scale 15%](assets/img/section/BubbleMap150.png)](https://r-graph-gallery.com/bubble-map.html)

.bottom[Map]
.bottom[Choropleth]
.bottom[Hexbin map]
.bottom[Cartogram]
.bottom[Connection]
.bottom[Bubble map]

<br>

.black.font120[
]

---
class: flow

# Flow
.footnote[[< Contents](#4)]

[![:scale 15%](assets/img/section/Chord150.png)](https://r-graph-gallery.com/chord-diagram.html)
[![:scale 15%](assets/img/section/Network150.png)](https://r-graph-gallery.com/network.html)
[![:scale 15%](assets/img/section/Sankey150.png)](https://r-graph-gallery.com/sankey-diagram.html)
[![:scale 15%](assets/img/section/Arc150.png)](https://www.data-to-viz.com/graph/arc.html)
[![:scale 15%](assets/img/section/Bundle150.png)](https://r-graph-gallery.com/hierarchical-edge-bundling.html)

.bottom[Chord diagram]
.bottom[Network]
.bottom[Sankey]
.bottom[Arc diagram]
.bottom[Edge bundling]

<br>

.black.font120[
]

---
class: other

# Other Resources
.footnote[[< Contents](#4)]

[![:scale 15%](assets/img/section/anim150.gif)](https://r-graph-gallery.com/animation.html)
[![:scale 15%](assets/img/section/Interactive150.png)](https://r-graph-gallery.com/interactive-charts.html)
[![:scale 15%](assets/img/section/Bad150.png)](https://www.data-to-viz.com/caveats.html)
[![:scale 15%](assets/img/section/DataArt1150.png)](https://www.data-to-art.com/)

.bottom[Animation]
.bottom[Interactive]
.bottom[Caveats]
.bottom[Data Art]

<br>

.black.font120[
]
